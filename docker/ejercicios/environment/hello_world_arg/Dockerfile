FROM node

WORKDIR /app
COPY . .
RUN npm install

#LOS ARGUMENTOS SOLO PUEDEN SER ACCEDIDOS EN EL DOCKERFILE, NO EN EL CODIGO DE LA APP, NI EN OPERACIONES QUE SE EJECUTEN DESPUES DE QUE EL CONTENEDOR LEVANTO, COMO CMD
ARG DEFAULT_PORT=80

#VEZ QUE AQUI USAMOS EL $ PARA DECIRLE A DOCKER QUE NOS ESTAMOS REFIRIENDO A ALGUN ARGUMENTO O VARIABLE DE ENTORNO
ENV PORT $DEFAULT_PORT

#USADO EL SIGNO DE $ HACEMOS REFERENCIA A LA VARIABLE DE ENTORNO
EXPOSE $PORT
CMD [ "node", "app.js"]

#LAS VARIABLES DE ENTORNO DEFINIEN CONFIGURACIONES CUANDO SE CORRE EL CONTENEDOR (RUN), POR OTRA PARTE LOS ARGUMENTOS PERMITEN DEFINIR CONFIGURACIONES CUANDO SE CONSTRUYE LA IMAGEN


#AHORA PODRIMAOS CONTRUIR LA IUMAGEN USANDO AL CONFIGURACION POR DEFECTO
#docker build -t environment .

#O DEFINIR NUESTRA PROPIA CONFIGURACION
#docker build -t environment_web --build-arg DEFAULT_PORT=8000 .
#ESTE COMANDO HABRA CONSTRUIDO LA IMAGEN PARA QUE LA APP ESCUCHE EN ESTE CASO POR EL PUERTO 8000, Y LUEGO BASTARIA ABRIR ESE PUERTO EN EL CONTENEDOR CON EL SIG COMANDO
#Y luego docker run -p 90:8000 environment_web 
